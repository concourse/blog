<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Concourse RBAC Preview | Concourse Blog</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Concourse RBAC Preview" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="https://commons.wikimedia.org/w/index.php?curid=17686969" />
<meta property="og:description" content="https://commons.wikimedia.org/w/index.php?curid=17686969" />
<link rel="canonical" href="http://localhost:4000/2018/11/23/concourse-rbac-preview.html" />
<meta property="og:url" content="http://localhost:4000/2018/11/23/concourse-rbac-preview.html" />
<meta property="og:site_name" content="Concourse Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-23T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Concourse RBAC Preview" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2018-11-23T00:00:00-05:00","datePublished":"2018-11-23T00:00:00-05:00","description":"https://commons.wikimedia.org/w/index.php?curid=17686969","headline":"Concourse RBAC Preview","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/11/23/concourse-rbac-preview.html"},"url":"http://localhost:4000/2018/11/23/concourse-rbac-preview.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Concourse Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Concourse Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Concourse RBAC Preview</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-11-23T00:00:00-05:00" itemprop="datePublished">Nov 23, 2018
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <figure class="kg-card kg-image-card kg-card-hascaption"><img src=" __GHOST_URL__ /content/images/downloaded_images/Concourse-RBAC-Preview/0-oy1M_w9ksoAje2LR.jpg" class="kg-image" alt="" loading="lazy" /><figcaption>https://commons.wikimedia.org/w/index.php?curid=17686969</figcaption></figure>

<p>One of the big themes for Concourse in 2018 has been <a href="https://concourse-ci.org/download.html#v400">Users</a>, <a href="https://concourse-ci.org/install.html#auth-config">multiple auth connectors</a>, and role-based access control (aka <a href="https://github.com/pivotal-jwinters/rfcs/blob/proposal/rbac/03-rbac/proposal.md">RBAC</a>). With RBAC in the final phases of development, I wanted to give you a preview of some of the functionality that you can expect in our upcoming release; Concourse 5.0</p>

<h2 id="admins-owners-members-andviewers">Admins, Owners, Members and Viewers</h2>

<p>Concourse 5.0 will come with 4 roles: Concourse Admin, Team Owner, Team Member, and Team Viewer.</p>

<h3 id="concourse-admin">Concourse Admin</h3>

<p>A Concourse Admin is the same as today’s <a href="https://concourse-ci.org/main-team.html">admin user</a>. Members of main team will automatically be Concourse Admins* and have the ability to administrate teams with fly : set-team, destroy-team, rename-team, and teams. Given that all Concourse Admins must be a member of the main team, all Concourse Admins must have at least one other role; and that should typically be the Team Owner role.</p>

<p>*there’s an open issue to restrict this grant to Team Owners on main in <a href="https://github.com/concourse/concourse/issues/2846">#2846</a></p>

<h3 id="team-owner">Team Owner</h3>

<p>Team Owners have read, write and auth management capabilities within the scope of their team. For those familiar with Concourse today, the scope of allowed actions for a Team Owner is very closely aligned to today’s Concourse team member. The new change is that you can no longer rename your own team or destroy your own team as an owner.</p>

<h3 id="team-member">Team Member</h3>

<p>Team Member is a new role that lets users operate within their teams in a read &amp; write fashion; but prevents them from changing the auth configurations of their team.</p>

<h3 id="team-viewer">Team Viewer</h3>

<p>Team Viewer is also a new role that gives users “read-only” access to a team. This locks everything down, preventing users from doing a set-pipeline or hijack.</p>

<h3 id="other-roles">Other Roles</h3>

<p>We considered other role types while developing this feature; including roles that would specifically prevent intercept and abort. We ultimately decided that our current configuration made more sense for the first release of RBAC. Ultimately every organization will have different needs for their access control, so we are also planning for a future where users can supply their own customized roles &amp; permissions matrix.</p>

<h3 id="full-roles-breakdown">Full Roles Breakdown</h3>

<p>For a full list of each role’s allowed actions you can reference our handy permission matrix on Google Sheets <a href="https://docs.google.com/spreadsheets/d/1np3hyJy3mVRfB2gcgKykz3QTQg5qEj28QgK523SEmao/edit#gid=1437859537">here</a>.</p>

<h2 id="configuring-roles-withfly">Configuring Roles with fly</h2>

<p>Now that we’ve gone over the new roles, we can do a quick overview of how we can go about setting users &amp; roles on teams.</p>

<h3 id="default-behaviour">Default Behaviour</h3>

<p>By default, if no configuration is provided the user is given theTeam Owner role:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fly -t dev set-team -n PowerRangers --local-user=Zordon
</code></pre></div></div>

<p>This behaviour also applies to groups as well, so be careful!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fly -t dev set-team -n A-Team 
          --github-team=MightyMorphin:PowerRangers
</code></pre></div></div>

<h3 id="specifying-roles-with-c">Specifying Roles with -c</h3>

<p>Roles must be specified in a separate configuration file using the -c</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fly -t dev set-team -n PowerTeam -c ./team.yml

team.yml

roles:
- name: owner
  local:
    users: ["Zordon"]
- name: member
  local:
    users: ["RedRanger", "BlueRanger", "GreenRanger"]
- name: viewer
  local:
    users: ["Alpha"]
</code></pre></div></div>

<h3 id="inspecting-roles-configuration">Inspecting Roles Configuration</h3>

<p>Once you’ve set the team configuration you can verify it using the details flag on fly teams:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fly -t dev teams -d

name users groups
A-Team/member local:RedRanger, BlueRanger, GreenRanger none  
A-Team/owner local:Zordon none  
A-Team/viewer local:Alpha none
</code></pre></div></div>

<p>..where you’ll find the output is now updated to list each team/role combination and its associated users/groups.</p>

<h2 id="whats-left">What’s left?</h2>

<p>And that’s RBAC in a nutshell! We’re really excited to get this in your hands in our upcoming release of Concourse. There’s only a few more issues that we want to finish off before releasing this feature, specifically:</p>

<ul>
  <li><a href="https://github.com/concourse/concourse/issues/2846">#2846</a> Admin users should be restricted to members of the main team with the owner role. This is so you don’t get weird cases of a Team Viewer on main getting Admin access</li>
  <li><a href="https://github.com/concourse/concourse/issues/2843">#2843</a> Dashboard team labels updated to display User Role. We need this otherwise users on the Web UI have no idea what they can / can’t do</li>
</ul>

  </div><a class="u-url" href="/2018/11/23/concourse-rbac-preview.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Concourse Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Concourse Blog</li><li><a class="u-email" href="mailto:noreply@blog.concourse-ci.org">noreply@blog.concourse-ci.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/concourse"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">concourse</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Come Fly The Friendly CI</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
